(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[275],{1457:function(e,s,t){Promise.resolve().then(t.bind(t,4619))},4619:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(3827),r=t(4090);function n(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(""),[l,o]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("adminToken");e?(o(e),d(e)):(c("Please authenticate to view submissions"),n(!1))},[]);let d=async e=>{try{let t=await fetch("/api/contact/submissions",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();s(e)}else c("Failed to fetch submissions")}catch(e){c("Network error")}finally{n(!1)}},m=async(e,t)=>{try{(await fetch("/api/contact/submissions",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({id:e,status:t})})).ok?s(s=>s.map(s=>s._id===e?{...s,status:t}:s)):c("Failed to update status")}catch(e){c("Network error")}};return t?(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-secondary mx-auto"}),(0,a.jsx)("p",{className:"mt-4",children:"Loading submissions..."})]})}):i&&!l?(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Contact Submissions"}),(0,a.jsx)("p",{className:"text-red-600 mb-4",children:i}),(0,a.jsx)("button",{onClick:()=>{let e=prompt("Enter admin token:");e&&(localStorage.setItem("adminToken",e),o(e),d(e))},className:"bg-secondary text-primary px-6 py-3 rounded-md hover:bg-accent transition-colors",children:"Authenticate"})]})}):(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Contact Submissions"}),(0,a.jsx)("button",{onClick:()=>d(l),className:"bg-secondary text-primary px-4 py-2 rounded-md hover:bg-accent transition-colors",children:"Refresh"})]}),i&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-md",children:i}),0===e.length?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-600",children:"No submissions yet."})}):(0,a.jsx)("div",{className:"space-y-6",children:e.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.subject}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["From: ",e.name," (",e.email,")"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("new"===e.status?"bg-blue-100 text-blue-800":"read"===e.status?"bg-yellow-100 text-yellow-800":"replied"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status}),(0,a.jsxs)("select",{value:e.status,onChange:s=>m(e._id,s.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,a.jsx)("option",{value:"new",children:"New"}),(0,a.jsx)("option",{value:"read",children:"Read"}),(0,a.jsx)("option",{value:"replied",children:"Replied"}),(0,a.jsx)("option",{value:"archived",children:"Archived"})]})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-md",children:(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:e.message})}),(0,a.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,a.jsx)("a",{href:"mailto:".concat(e.email,"?subject=Re: ").concat(e.subject),className:"bg-secondary text-primary px-4 py-2 rounded-md hover:bg-accent transition-colors text-sm",children:"Reply via Email"}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.email),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors text-sm",children:"Copy Email"})]})]},e._id))})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1457)}),_N_E=e.O()}]);