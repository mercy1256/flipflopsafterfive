"use strict";(()=>{var t={};t.id=370,t.ids=[370],t.modules={517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8377:(t,e,r)=>{r.r(e),r.d(e,{headerHooks:()=>m,originalPathname:()=>v,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>b});var s={};r.r(s),r.d(s,{GET:()=>c,PATCH:()=>d});var o=r(5419),a=r(9108),n=r(9678),i=r(8070),u=r(6882);async function c(t){try{let e=t.headers.get("authorization");if(!e||!e.startsWith("Bearer "))return i.Z.json({error:"Unauthorized"},{status:401});let r=(await u.Z).db("flipflopsafterfive").collection("contacts"),s=await r.find({}).sort({createdAt:-1}).toArray();return i.Z.json(s)}catch(t){return console.error("Error fetching submissions:",t),i.Z.json({error:"Failed to fetch submissions"},{status:500})}}async function d(t){try{let{id:e,status:r}=await t.json();if(!e||!r)return i.Z.json({error:"ID and status are required"},{status:400});let s=(await u.Z).db("flipflopsafterfive").collection("contacts"),o=await s.updateOne({_id:e},{$set:{status:r}});if(0===o.matchedCount)return i.Z.json({error:"Submission not found"},{status:404});return i.Z.json({message:"Status updated successfully"})}catch(t){return console.error("Error updating submission:",t),i.Z.json({error:"Failed to update submission"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/contact/submissions/route",pathname:"/api/contact/submissions",filename:"route",bundlePath:"app/api/contact/submissions/route"},resolvedPagePath:"C:\\Users\\Urvish Shah\\Desktop\\projects\\Blog\\flipflopsafterfive\\src\\app\\api\\contact\\submissions\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:h,headerHooks:m,staticGenerationBailout:b}=l,v="/api/contact/submissions/route";function g(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}},6882:(t,e,r)=>{r.d(e,{Z:()=>a});let s=require("mongodb");if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");let o=process.env.MONGODB_URI,a=new s.MongoClient(o,{}).connect()}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[638,206],()=>r(8377));module.exports=s})();